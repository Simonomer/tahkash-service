swagger: "2.0"
info:
  version: "0.0.1"
  title: Hello World App
host: localhost:10010
basePath: /
schemes:
  - http
  - https
consumes:
  - application/json
produces:
  - application/json
paths:

  # -------Form---------
  /form:
    x-swagger-router-controller: form.controller
    post:
      description: Creates a form
      operationId: createForm
      tags:
        - Form
      parameters:
        - name: subject
          in: body
          schema:
            type: object
            properties:
              name:
                type: string
              link:
                type: string
              tags:
                type: array
                items:
                  type: string
      responses:
        "201":
          description: Success
          schema:
            $ref: '#/definitions/Form'
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

    put:
      description: Modify form
      operationId: modifyForm
      tags:
        - Form
      parameters:
        - in: body
          name: form
          required: true
          schema:
            $ref: '#/definitions/Form'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/Form'
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /form/duplicate:
    x-swagger-router-controller: form.controller
    post:
      description: Duplicates a form by it's id
      operationId: duplicateForm
      tags:
        - Form
      parameters:
        - in: body
          name: id
          required: true
          schema:
            type: object
            properties:
              _id:
                type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/Form'
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /forms/{expand}:
    x-swagger-router-controller: form.controller
    get:
      description: Gets all forms
      operationId: getAllForms
      tags:
        - Form
      parameters:
        - name: expand
          in: path
          description: Whether or not to return the tags
          required: true
          type: boolean
          default: true
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: '#/definitions/Form'
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /form/{formId}:
    x-swagger-router-controller: form.controller
    get:
      description: Get form with it's tags
      operationId: getForm
      tags:
        - Form
      parameters:
        - name: formId
          in: path
          description: The form id
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/Form'
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"


  # -------Question---------
  /form/question/{formId}:
    x-swagger-router-controller: question.controller
    post:
      description: Creates question on a form
      tags:
        - Question
      operationId: createQuestion
      parameters:
        - in: path
          name: formId
          type: string
          required: true
        - in: body
          name: question
          schema:
            $ref: '#/definitions/Question'
      responses:
        "200":
          description: Question created
          schema:
            $ref: '#/definitions/Question'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

    get:
      description: Get all questions per form
      tags:
        - Question
      operationId: getQuestionsForForm
      parameters:
        - in: path
          name: formId
          type: string
          required: true
      responses:
        "200":
          description: Question created
          schema:
            type: array
            items:
              $ref: '#/definitions/Question'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

  /question/{questionId}:
    x-swagger-router-controller: question.controller
    delete:
      description: Deletes a question
      operationId: deleteQuestion
      tags:
        - Question
      parameters:
        - in: path
          name: questionId
          type: string
          required: true
      responses:
        200:
          description: OK

  /question:
    x-swagger-router-controller: question.controller
    put:
      description: Modify questions
      operationId: modifyQuestions
      tags:
        - Question
      parameters:
        - in: body
          name: questions
          schema:
            type: array
            items:
              $ref: '#/definitions/Question'
      responses:
        "200":
          description: Question created
          schema:
            type: array
            items:
              $ref: '#/definitions/Question'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

  # -------Tag---------
  /tag:
    x-swagger-router-controller: tag.controller
    post:
      description: Creates a tag
      operationId: createTag
      tags:
        - Tag
      parameters:
        - in: body
          name: tag
          schema:
            $ref: '#/definitions/Tag'
      responses:
        "201":
          description: Tag created
          schema:
            $ref: '#/definitions/Tag'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

  /tags:
    x-swagger-router-controller: tag.controller
    get:
      description: Gets all tags
      operationId: getTags
      tags:
        - Tag
      responses:
        "200":
          description: Tag created
          schema:
            type: array
            items:
              $ref: '#/definitions/Tag'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

  /tag/{tagId}:
    x-swagger-router-controller: tag.controller
    put:
      description: Modifies a tag
      operationId: modifyTag
      tags:
        - Tag
      parameters:
        - in: path
          name: tagId
          type: string
          required: true
        - in: body
          name: tag
          schema:
            $ref: '#/definitions/Tag'
      responses:
        "200":
          description: Tag created
          schema:
            $ref: '#/definitions/Tag'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'

    delete:
      description: Deletes an existing tag
      operationId: deleteTag
      tags:
        - Tag
      parameters:
        - in: path
          name: tagId
          type: string
          required: true
      responses:
        "200":
          description: Tag created
          schema:
            $ref: '#/definitions/Tag'
        default:
          description: Error
          schema:
            $ref: '#/definitions/ErrorResponse'



  /swagger:
    x-swagger-pipe: swagger_raw

# -------Models---------
definitions:
  Form:
    type: object
    description: This is represents a form
    properties:
      name:
        type: string
      link:
        type: string
      tags:
        type: array
        items:
          type: string

  Question:
    type: object
    description: This is represents a question
    properties:
      form:
        type: string
      text:
        type: string
      priority:
        type: number

  Tag:
    type: object
    description: This is represents a tag
    properties:
      text:
        type: string
      group:
        type: string

  ErrorResponse:
    required:
      - message
    properties:
      message:
        type: string
